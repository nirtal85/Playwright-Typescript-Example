# Test info

- Name: New Todo >> should allow me to add todo items
- Location: /__w/Playwright-Typescript-Example/Playwright-Typescript-Example/tests/demo-todo-app.spec.ts:10:3

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveText(expected)

Locator: getByTestId('todo-title')
- Expected  - 3
+ Received  + 1

- Array [
-   "buy some cheese",
- ]
+ Array []
Call log:
  - expect.toHaveText with timeout 5000ms
  - waiting for getByTestId('todo-title')
    9 × locator resolved to 0 elements

    at /__w/Playwright-Typescript-Example/Playwright-Typescript-Example/tests/demo-todo-app.spec.ts:19:50
```

# Page snapshot

```yaml
- text: This is just a demo of TodoMVC for testing, not the
- link "real TodoMVC app.":
  - /url: https://todomvc.com/
- heading "todos" [level=1]
- textbox "What needs to be done?"
- checkbox "❯Mark all as complete"
- text: ❯Mark all as complete
- list:
  - listitem:
    - checkbox "Toggle Todo"
    - text: buy some cheese
- strong: "1"
- text: item left
- list:
  - listitem:
    - link "All":
      - /url: "#/"
  - listitem:
    - link "Active":
      - /url: "#/active"
  - listitem:
    - link "Completed":
      - /url: "#/completed"
- contentinfo:
  - paragraph: Double-click to edit a todo
  - paragraph:
    - text: Created by
    - link "Remo H. Jansen":
      - /url: http://github.com/remojansen/
  - paragraph:
    - text: Part of
    - link "TodoMVC":
      - /url: http://todomvc.com
```

# Test source

```ts
   1 | import { test, expect, type Page } from '@playwright/test';
   2 |
   3 | test.beforeEach(async ({ page }) => {
   4 |   await page.goto('https://demo.playwright.dev/todomvc');
   5 | });
   6 |
   7 | const TODO_ITEMS = ['buy some cheese', 'feed the cat', 'book a doctors appointment'] as const;
   8 |
   9 | test.describe('New Todo', () => {
   10 |   test('should allow me to add todo items', async ({ page }) => {
   11 |     // create a new todo locator
   12 |     const newTodo = page.getByPlaceholder('What needs to be done?');
   13 |
   14 |     // Create 1st todo.
   15 |     await newTodo.fill(TODO_ITEMS[0]);
   16 |     await newTodo.press('Enter');
   17 |
   18 |     // Make sure the list only has one todo item.
>  19 |     await expect(page.getByTestId('todo-title')).toHaveText([TODO_ITEMS[0]]);
      |                                                  ^ Error: Timed out 5000ms waiting for expect(locator).toHaveText(expected)
   20 |
   21 |     // Create 2nd todo.
   22 |     await newTodo.fill(TODO_ITEMS[1]);
   23 |     await newTodo.press('Enter');
   24 |
   25 |     // Make sure the list now has two todo items.
   26 |     await expect(page.getByTestId('todo-title')).toHaveText([TODO_ITEMS[0], TODO_ITEMS[1]]);
   27 |
   28 |     await checkNumberOfTodosInLocalStorage(page, 2);
   29 |   });
   30 |
   31 |   test('should clear text input field when an item is added', async ({ page }) => {
   32 |     // create a new todo locator
   33 |     const newTodo = page.getByPlaceholder('What needs to be done?');
   34 |
   35 |     // Create one todo item.
   36 |     await newTodo.fill(TODO_ITEMS[0]);
   37 |     await newTodo.press('Enter');
   38 |
   39 |     // Check that input is empty.
   40 |     await expect(newTodo).toBeEmpty();
   41 |     await checkNumberOfTodosInLocalStorage(page, 1);
   42 |   });
   43 |
   44 |   test('should append new items to the bottom of the list', async ({ page }) => {
   45 |     // Create 3 items.
   46 |     await createDefaultTodos(page);
   47 |
   48 |     // create a todo count locator
   49 |     const todoCount = page.getByTestId('todo-count');
   50 |
   51 |     // Check test using different methods.
   52 |     await expect(page.getByText('3 items left')).toBeVisible();
   53 |     await expect(todoCount).toHaveText('3 items left');
   54 |     await expect(todoCount).toContainText('3');
   55 |     await expect(todoCount).toHaveText(/3/);
   56 |
   57 |     // Check all items in one call.
   58 |     await expect(page.getByTestId('todo-title')).toHaveText(TODO_ITEMS);
   59 |     await checkNumberOfTodosInLocalStorage(page, 3);
   60 |   });
   61 | });
   62 |
   63 | test.describe('Mark all as completed', () => {
   64 |   test.beforeEach(async ({ page }) => {
   65 |     await createDefaultTodos(page);
   66 |     await checkNumberOfTodosInLocalStorage(page, 3);
   67 |   });
   68 |
   69 |   test.afterEach(async ({ page }) => {
   70 |     await checkNumberOfTodosInLocalStorage(page, 3);
   71 |   });
   72 |
   73 |   test('should allow me to mark all items as completed', async ({ page }) => {
   74 |     // Complete all todos.
   75 |     await page.getByLabel('Mark all as complete').check();
   76 |
   77 |     // Ensure all todos have 'completed' class.
   78 |     await expect(page.getByTestId('todo-item')).toHaveClass([
   79 |       'completed',
   80 |       'completed',
   81 |       'completed'
   82 |     ]);
   83 |     await checkNumberOfCompletedTodosInLocalStorage(page, 3);
   84 |   });
   85 |
   86 |   test('should allow me to clear the complete state of all items', async ({ page }) => {
   87 |     const toggleAll = page.getByLabel('Mark all as complete');
   88 |     // Check and then immediately uncheck.
   89 |     await toggleAll.check();
   90 |     await toggleAll.uncheck();
   91 |
   92 |     // Should be no completed classes.
   93 |     await expect(page.getByTestId('todo-item')).toHaveClass(['', '', '']);
   94 |   });
   95 |
   96 |   test('complete all checkbox should update state when items are completed / cleared', async ({
   97 |     page
   98 |   }) => {
   99 |     const toggleAll = page.getByLabel('Mark all as complete');
  100 |     await toggleAll.check();
  101 |     await expect(toggleAll).toBeChecked();
  102 |     await checkNumberOfCompletedTodosInLocalStorage(page, 3);
  103 |
  104 |     // Uncheck first todo.
  105 |     const firstTodo = page.getByTestId('todo-item').nth(0);
  106 |     await firstTodo.getByRole('checkbox').uncheck();
  107 |
  108 |     // Reuse toggleAll locator and make sure its not checked.
  109 |     await expect(toggleAll).not.toBeChecked();
  110 |
  111 |     await firstTodo.getByRole('checkbox').check();
  112 |     await checkNumberOfCompletedTodosInLocalStorage(page, 3);
  113 |
  114 |     // Assert the toggle all is checked again.
  115 |     await expect(toggleAll).toBeChecked();
  116 |   });
  117 | });
  118 |
  119 | test.describe('Item', () => {
```